# ‚úÖ –ì–ò–ë–ö–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –¢–†–ï–ù–î–ê - –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞:** 2025-10-17  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û

---

## üéØ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1. **Backend (Python)**

#### **bot_engine/bot_config.py**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞:
  ```python
  TREND_CONFIRMATION_BARS = 3
  TREND_MIN_CONFIRMATIONS = 2
  TREND_REQUIRE_SLOPE = False
  TREND_REQUIRE_PRICE = True
  TREND_REQUIRE_CANDLES = True
  ```

- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `SystemConfig`:
  ```python
  class SystemConfig:
      TREND_CONFIRMATION_BARS = 3
      TREND_MIN_CONFIRMATIONS = 2
      TREND_REQUIRE_SLOPE = False
      TREND_REQUIRE_PRICE = True
      TREND_REQUIRE_CANDLES = True
  ```

#### **bot_engine/optimal_ema_manager.py**
- ‚úÖ `get_optimal_ema_periods()` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –º–æ–Ω–µ—Ç—ã:
  ```python
  {
      'ema_short': 50,
      'ema_long': 200,
      'trend_confirmation_bars': None,  # –∏–ª–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
      'trend_min_confirmations': None,
      'trend_require_slope': None,
      'trend_require_price': None,
      'trend_require_candles': None
  }
  ```

- ‚úÖ `get_default_ema_periods()` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏

#### **bots_modules/calculations.py**
- ‚úÖ `analyze_trend_6h()` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –≥–∏–±–∫–æ–π –ª–æ–≥–∏–∫–æ–π:
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–Ω–µ—Ç—ã –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
  - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
  - –ú—è–≥–∫–∏–µ —É—Å–ª–æ–≤–∏—è (N –∏–∑ M –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π)

#### **bots_modules/api_endpoints.py**
- ‚úÖ Endpoint `/api/bots/system-config` –æ–±–Ω–æ–≤–ª–µ–Ω:
  - **GET:** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞
  - **POST:** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞

#### **bots_modules/sync_and_cache.py**
- ‚úÖ `load_system_config()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞ –∏–∑ —Ñ–∞–π–ª–∞

---

### 2. **Frontend (JavaScript + HTML)**

#### **templates/pages/bots.html**
- ‚úÖ –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è "üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞" –¥–æ–±–∞–≤–ª–µ–Ω–∞:
  - 5 –ø–æ–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - –ö–Ω–æ–ø–∫–∞ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞"
  - –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

**–ü–æ–ª—è:**
1. `trendConfirmationBars` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (1-10)
2. `trendMinConfirmations` - –ú–∏–Ω–∏–º—É–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (1-5)
3. `trendRequireSlope` - –¢—Ä–µ–±–æ–≤–∞—Ç—å –Ω–∞–∫–ª–æ–Ω EMA (—á–µ–∫–±–æ–∫—Å)
4. `trendRequirePrice` - –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é —Ü–µ–Ω—ã (—á–µ–∫–±–æ–∫—Å)
5. `trendRequireCandles` - –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–≤–µ—á–∞–º–∏ (—á–µ–∫–±–æ–∫—Å)

#### **static/js/managers/bots_manager.js**
- ‚úÖ `populateConfigurationForm()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ `collectConfigurationData()` —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ `saveTrendParameters()` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞" –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•

### **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (data/system_config.json)**
```json
{
  "trend_confirmation_bars": 3,
  "trend_min_confirmations": 2,
  "trend_require_slope": false,
  "trend_require_price": true,
  "trend_require_candles": true
}
```

### **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–µ—Ç—ã (data/optimal_ema.json)**
```json
{
  "BTC": {
    "ema_short_period": 50,
    "ema_long_period": 200,
    "accuracy": 95.5,
    
    "trend_confirmation_bars": 3,
    "trend_min_confirmations": 2,
    "trend_require_slope": false,
    "trend_require_price": true,
    "trend_require_candles": true
  }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ —É–∫–∞–∑–∞–Ω –∏–ª–∏ `null`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

---

## üîÑ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### **–ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ UI (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)**

1. –û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
2. –ù–∞–π—Ç–∏ —Å–µ–∫—Ü–∏—é "üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞"
3. –ò–∑–º–µ–Ω–∏—Ç—å –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –ù–∞–∂–∞—Ç—å "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–¥–∞"
5. –ì–æ—Ç–æ–≤–æ! –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∫–æ –≤—Å–µ–º –º–æ–Ω–µ—Ç–∞–º

### **–ú–µ—Ç–æ–¥ 2: –í—Ä—É—á–Ω—É—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–Ω–µ—Ç—ã**

1. –û—Ç–∫—Ä—ã—Ç—å `data/optimal_ema.json`
2. –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –º–æ–Ω–µ—Ç—É
3. –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   ```json
   "MYCOIN": {
     "ema_short_period": 50,
     "ema_long_period": 200,
     "trend_confirmation_bars": 2,
     "trend_min_confirmations": 1
   }
   ```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª
5. –ù–∞–∂–∞—Ç—å "üîÑ Hot Reload" –≤ UI

### **–ú–µ—Ç–æ–¥ 3: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ**

```python
from bot_engine.optimal_ema_manager import optimal_ema_data, save_optimal_ema_periods

# –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
optimal_ema_data['MYCOIN']['trend_confirmation_bars'] = 2
optimal_ema_data['MYCOIN']['trend_min_confirmations'] = 1

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
save_optimal_ema_periods()
```

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ù–ê–°–¢–†–û–ô–ö–ï

### **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
```
TREND_CONFIRMATION_BARS = 3      # 3 —Å–≤–µ—á–∏
TREND_MIN_CONFIRMATIONS = 2      # 2 –∏–∑ 3 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
TREND_REQUIRE_SLOPE = False      # –ù–∞–∫–ª–æ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
TREND_REQUIRE_PRICE = True       # –¶–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
TREND_REQUIRE_CANDLES = True     # –°–≤–µ—á–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –Ω–µ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∞—è, –Ω–µ —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∞—è.

### **–î–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –º–æ–Ω–µ—Ç:**
```
TREND_CONFIRMATION_BARS = 2
TREND_MIN_CONFIRMATIONS = 1
TREND_REQUIRE_SLOPE = False
TREND_REQUIRE_PRICE = False
TREND_REQUIRE_CANDLES = True
```

### **–î–ª—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏:**
```
TREND_CONFIRMATION_BARS = 5
TREND_MIN_CONFIRMATIONS = 4
TREND_REQUIRE_SLOPE = True
TREND_REQUIRE_PRICE = True
TREND_REQUIRE_CANDLES = True
```

---

## ‚úÖ –§–ê–ô–õ–´ –û–ë–ù–û–í–õ–ï–ù–´

### Backend:
1. ‚úÖ `bot_engine/bot_config.py`
2. ‚úÖ `bot_engine/optimal_ema_manager.py`
3. ‚úÖ `bots_modules/calculations.py`
4. ‚úÖ `bots_modules/api_endpoints.py`
5. ‚úÖ `bots_modules/sync_and_cache.py`

### Frontend:
6. ‚úÖ `templates/pages/bots.html`
7. ‚úÖ `static/js/managers/bots_manager.js`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
8. ‚úÖ `docs/FLEXIBLE_TREND_CONFIG.md`

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
9. ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ `InfoBot_Public`

---

## üöÄ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã
- ‚úÖ UI –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ Hot Reload –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å!** üéâ

